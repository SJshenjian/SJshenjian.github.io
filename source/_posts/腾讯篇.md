## JAVA基础

### 1. JAVA中的几种基本数据类型是什么，各自占用多少字节。

|数据类型|字节|默认值|
|-|-|-|
|byte|1|0|
|short|2|0|
|char|2|'\u0000'|
|int|4|0|
|float|4|0.0f|
|long|8|0|
|double|8|0.0d|
|boolean|4|false| 

PS: JVM规范中，boolean当做int处理，也就是4字节，而boolean数组当做byte数组处理，即boolean类型的数组里面每一个元素占一个字节             

### 2. String类能被继承吗，为什么

不可以，因为String类有final，而final修饰的类是不能被继承的

### 3. String，Stringbuffer，StringBuilder的区别

+ String：不可变，每次对String进行操作都会产生新对象，效率低且浪费内存空间
+ StringBuffer： 可变字符序列，效率低，线程安全
+ StringBuilder: 可变字符序列，效率高，线程不安全

### 4. ArrayList和LinkedList有什么区别

+ ArrayList: 基于数组实现的非线程安全的集合。查询速度快，插入、删除中间元素速度慢
+ LinkedList: 基于链表实现的线程安全的集合。查询速度慢，插入、删除中间元素快
+ Vector: 基于数组实现的线程安全的集合。采用synchronize加锁,性能比ArrayList差
+ CopyOnWriteArrayList: 基于数组实现的线程安全的写时复制集合，采用ReentrantLock加锁，性能比Vector高，适合读多写少的场景

### 5. 讲讲类的实例化顺序，比如父类静态数据，构造函数，字段，子类静态数据，构造函数，字段，当new的时候，他们的执行顺序。

父类静态变量
父类静态代码块
子类静态变量
子类静态代码块

父类非静态变量(父类实例成员变量)
父类构造函数
子类非静态变量(子类实例成员变量)
子类构造函数

### 6. 用过哪些Map类，都有什么区别，HashMap是线程安全的吗,并发下使用的Map是什么，他们内部原理分别是什么，比如存储方式，hashcode，扩容，默认容量等。

HashMap、ConcurrentHashMap、TreeMap、 LinkedHashMap

HashMap线程不安全，由数组(Node数组)+链表+红黑树(链表长度大于8转换为红黑树)实现，采用hash表来存储,key采用hashcode,数量超过threshold时进行2倍扩容，默认容量16，负载因子0.75，桶的数量11,
采用链地址法解决hash冲突
[Java 8系列之重新认识HashMap](https://zhuanlan.zhihu.com/p/21673805)

大量采用CAS操作，JDK1.7对Segment进行加锁，JDK1.8对桶中的头结点进行加锁
[ConcurrentHashMap的实现原理](https://shenjian.online/2019/02/14/ConcurrentHashMap%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/)

TreeMap和LinkedHashMap有序的（TreeMap默认升序，LinkedHashMap记录插入的顺序）

### 7. JAVA8的ConcurrentHashMap为什么放弃了分段锁，有什么问题吗，如果你来设计，你如何设计

Segment继承ReentrantLock,每个锁控制一段，当每个Segment越来越大时，锁定粒度则变大，性能会下降
ConcurrentHashMap底层采用数组+链表+红黑树，大量采用CAS操作，加锁采用synchronized，只对桶的头节点进行加锁，粒度较小。

减少内存开销。如果采用ReentrantLock需要节点继承AQS来获得同步支持，增加内存开销,
内部优化。synchronized是有JVM直接支持的，JVM能够在运行时做相应优化如，锁粗化、锁消除、锁自旋等

### 8. 有没有有顺序的Map实现类，如果有，他们是怎么保证有序的

TreeMap和LinkedHashMap有序的（TreeMap默认升序，LinkedHashMap记录插入的顺序）
TreeMap是基于比较器Comparator实现有序的，LinkedHashMap是基于链表实现数据插入有序的

### 9. 抽象类和接口的区别，类可以继承多个类么，接口可以继承多个接口么,类可以实现多个接口么

+ 接口只能做方法声明，抽象类既可以做方法声明也可以做方法实现
+ 接口里定义的变量只能是公共的静态常量，抽象类中变量是普通变量
+ 抽象类里可以没有抽象类，如果一个类中有抽象方法，则一定是抽象类
+ 抽象方法要被实现，所以不能是静态的，也不能是私有的
+ 接口继承接口，并可多继承接口，但类只能单继承

类不能继承多个类
接口可以继承多个接口
类可以实现多个接口

### 10. 继承、组合、聚合有什么区别

继承: is-a的关系，指一个类继承另一个类 `public class A extends B{}`

聚合：has-a, A可以有B `public class A {List<B> b}`

组合：contains-a，强聚合，A一定有B `public class A {B b}`

### 11. IO模型有哪些，讲讲你理解的nio ，他和bio，aio的区别是啥，谈谈reactor模型

**BIO、NIO、AIO**

BIO: 同步并阻塞 客户端有一个IO请求，服务端就需要启动一个线程进行处理。适用于连接数比较少，tomcat采用传统的BIO+线程池模式
NIO: 同步非阻塞 客户端的IO请求会注册到多路复用器上，多路复用器轮询到有IO请求时才启动一个线程处理。适用于连接数多且连接比较短(轻操作)的架构，比如聊天服务器
AIO: 异步非阻塞 客户端的IO请求都是有OS完成后，在通知服务器启动线程处理。适用于连接数多且连接比较长(重操作)的架构，如相册服务器

**Reactor模型**

+ 事件驱动
+ 可以处理一个或多个输入源
+ 通过Service Handle同步的将输入事件采用多路复用分发给相应的Request Handler(一个或多个)处理

### 12. 反射的原理，反射创建类实例的三种方式是什么

所谓的反射机制就是JAVA语言在运行时拥有一项自观的能力

```
Class class1 = HelloWorld.class;
Class class2 = helloWorld.getClass();
Class class3 = Class.forName("online.shenjian.HelloWorld");

class1.newInstance();
```
